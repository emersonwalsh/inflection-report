import{a as P,b as D,c as I,d as O,e as j,f as W,g as F}from"./chunk-6AAS64VP.js";import{b as L,d as T,f as N}from"./chunk-UAPER274.js";import{$a as s,Ca as w,La as f,Ma as x,O as u,Qa as h,Ra as t,Sa as i,T as p,Ta as m,U as g,V as b,W as S,Xa as _,Za as C,ea as d,fb as r,gb as v,kb as E,lb as M,mb as k,sa as a,yb as V}from"./chunk-5DWVNUN4.js";function G(n,o){if(n&1&&(t(0,"p",10),r(1),i()),n&2){let e=s(2);a(),v(e.error())}}function R(n,o){n&1&&(b(),t(0,"svg",13),m(1,"circle",14)(2,"path",15),i(),r(3," Sending... "))}function z(n,o){n&1&&r(0," Continue with Email ")}function B(n,o){if(n&1){let e=_();t(0,"h2",6),r(1," Google Trends Tracker "),i(),t(2,"p",7),r(3," Enter your email to access the full report with YoY search interest data for 500+ companies. "),i(),t(4,"form",8),C("ngSubmit",function(){p(e);let l=s();return g(l.submitEmail())}),t(5,"div")(6,"input",9),k("ngModelChange",function(l){p(e);let y=s();return M(y.email,l)||(y.email=l),g(l)}),i(),f(7,G,2,1,"p",10),i(),t(8,"button",11),f(9,R,4,0)(10,z,1,0),i()(),t(11,"p",12),r(12," We'll send you a magic link to verify your email. "),i()}if(n&2){let e=s();a(6),E("ngModel",e.email),h("disabled",e.isSubmitting()),a(),x(e.error()?7:-1),a(),h("disabled",e.isSubmitting()),a(),x(e.isSubmitting()?9:10)}}function H(n,o){if(n&1){let e=_();t(0,"div",5)(1,"div",16),b(),t(2,"svg",17),m(3,"path",18),i()(),S(),t(4,"h2",19),r(5," Check your email "),i(),t(6,"p",20),r(7," We sent a verification link to"),m(8,"br"),t(9,"span",21),r(10),i()(),t(11,"p",22),r(12," Click the link in the email to access the report."),m(13,"br"),r(14," The link will expire in 1 hour. "),i(),t(15,"button",23),C("click",function(){p(e);let l=s();return g(l.resetForm())}),r(16," Use a different email "),i()()}if(n&2){let e=s();a(10),v(e.email())}}var A=class n{supabase=u(N);router=u(T);route=u(L);email=d("");isSubmitting=d(!1);error=d("");emailSent=d(!1);ngOnInit(){if(this.supabase.isAuthenticated()){this.router.navigate(["/"]);return}this.route.queryParams.subscribe(o=>{o.error==="verification_failed"&&this.error.set("Email verification failed. Please try again.")})}async submitEmail(){let o=this.email().trim();if(!o){this.error.set("Please enter your email address.");return}if(!this.isValidEmail(o)){this.error.set("Please enter a valid email address.");return}this.error.set(""),this.isSubmitting.set(!0);try{let{error:e}=await this.supabase.signInWithMagicLink(o);e?this.error.set(e.message):this.emailSent.set(!0)}catch{this.error.set("Something went wrong. Please try again.")}finally{this.isSubmitting.set(!1)}}isValidEmail(o){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)}resetForm(){this.emailSent.set(!1),this.email.set(""),this.error.set("")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-login"]],decls:7,vars:1,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gray-50","p-4"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-md"],[1,"pt-8","pb-4","mx-8","flex","justify-center","border-b","border-[rgba(15,23,42,0.05)]"],["src","black_logo.png","alt","Kinesic Capital",1,"h-10","mb-4"],[1,"px-8","pt-6","pb-8"],[1,"text-center"],[1,"text-2xl","font-bold","text-center","text-[#0f172a]","mb-2"],[1,"text-sm","text-center","text-[#6b7280]","mb-6"],[1,"space-y-4",3,"ngSubmit"],["type","email","name","email","placeholder","Enter your email address","autocomplete","email",1,"block","w-full","px-4","py-3","border","border-gray-300","rounded-lg","text-base","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel","disabled"],[1,"mt-2","text-sm","text-red-600"],["type","submit",1,"w-full","btn","btn-primary","py-3","text-base","font-semibold","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"mt-4","text-xs","text-center","text-[#9ca3af]"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","inline","mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mx-auto","w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"text-2xl","font-bold","text-[#0f172a]","mb-2"],[1,"text-sm","text-[#6b7280]","mb-6"],[1,"font-medium","text-[#0f172a]"],[1,"text-xs","text-[#9ca3af]","mb-6"],[1,"text-sm","text-blue-600","hover:text-blue-700","font-medium",3,"click"]],template:function(e,c){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),m(3,"img",3),i(),t(4,"div",4),f(5,B,13,5)(6,H,17,1,"div",5),i()()()),e&2&&(a(5),x(c.emailSent()?6:5))},dependencies:[V,F,W,P,D,I,j,O],styles:[".btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;border-radius:.5rem;font-weight:600;transition:all .15s ease;cursor:pointer;border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){background-color:#1d4ed8}"]})};export{A as LoginComponent};
